#:import MapView kivy_garden.mapview.MapView
#:import MapSource kivy_garden.mapview.MapSource
#:import MapMarker kivy_garden.mapview.MapMarker
#:import MapMarkerPopup kivy_garden.mapview.MapMarkerPopup

<Menu_Evento>:
    


<Layout_Mapa>:
    MapView:
        id: map_view
        lat: root.latitud
        lon: root.longitud
        zoom: root.zoom
        zoom_min: 4
        zoom_max: 18
        map_source: MapSource(url="https://tile.openstreetmap.org/{z}/{x}/{y}.png",cache_key="custom_map",min_zoom=4,max_zoom=18,tile_size=256,image_ext="png")
        on_parent:
            self._marker = None
        on_lat:
            if root.ubicacion_actualizada and hasattr(self, '_marker'): [ \
            self.remove_marker(self._marker) if self._marker else None, \
            setattr(self, '_marker', MapMarker(lat=root.latitud, lon=root.longitud)), \
            self.add_marker(self._marker), \
            setattr(root, 'marker', self._marker) \
            ]
    BoxLayout:
        orientation: 'horizontal'
        size_hint: (1,0.1)
        pos_hint: {"top":1}
        Button:
            text: 'Atras'
            size_hint_x: 0.2
            on_release: root.Regresar_Estandar()
        TextInput:
            size_hint_x: 0.8


